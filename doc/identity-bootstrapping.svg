<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="-14 57 601 678" width="601pt" height="678pt"><metadata xmlns:dc="http://purl.org/dc/elements/1.1/"><dc:date>2017-07-30 17:50Z</dc:date><!-- Produced by OmniGraffle Professional 5.4.4 --></metadata><defs><font-face font-family="Helvetica" font-size="12" units-per-em="1000" underline-position="-75.683594" underline-thickness="49.316406" slope="0" x-height="522.94922" cap-height="717.28516" ascent="770.01953" descent="-229.98047" font-weight="500"><font-face-src><font-face-name name="Helvetica"/></font-face-src></font-face><marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black"><g><path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/></g></marker><font-face font-family="Courier New" font-size="8" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.51953" descent="-300.29297" font-weight="500"><font-face-src><font-face-name name="CourierNewPSMT"/></font-face-src></font-face><font-face font-family="Courier New" font-size="8" panose-1="2 7 6 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="100.097656" slope="0" x-height="443.35938" cap-height="591.79688" ascent="832.51953" descent="-300.29297" font-weight="bold"><font-face-src><font-face-name name="CourierNewPS-BoldMT"/></font-face-src></font-face><font-face font-family="Courier New" font-size="9" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.51953" descent="-300.29297" font-weight="500"><font-face-src><font-face-name name="CourierNewPSMT"/></font-face-src></font-face></defs><g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"><title>Canvas 1</title><rect fill="white" width="576" height="733"/><g><title>Layer 1</title><rect x="180" y="241" width="384" height="330" fill="#ccc"/><path d="M 180 241 L 564 241 L 564 571 L 180 571 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" stroke-dasharray="1,4"/><rect x="268.8" y="375.0375" width="254" height="110.125" fill="#c99"/><path d="M 268.8 375.0375 L 522.8 375.0375 L 522.8 485.1625 L 268.8 485.1625 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" stroke-dasharray="1,4"/><path d="M 26 66 L 107.5 66 C 108.60457 66 109.5 66.89543 109.5 68 L 109.5 84.5 C 109.5 85.60457 108.60457 86.5 107.5 86.5 L 26 86.5 C 24.89543 86.5 24 85.60457 24 84.5 L 24 68 C 24 66.89543 24.89543 66 26 66 Z" fill="#999"/><text transform="translate(29 69.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="19.735352" y="11" textLength="7.330078">T</tspan><tspan font-family="Helvetica" font-size="12" font-weight="500" x="25.735352" y="11" textLength="30.029297">enant</tspan></text><path d="M 187 66 L 260 66 C 261.10457 66 262 66.89543 262 68 L 262 84.5 C 262 85.60457 261.10457 86.5 260 86.5 L 187 86.5 C 185.89544 86.5 185 85.60457 185 84.5 L 185 68 C 185 66.89543 185.89544 66 187 66 Z" fill="#999"/><text transform="translate(190 69.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x=".15722275" y="11" textLength="66.685547">Orchestrator</tspan></text><path d="M 339 66 L 407 66 C 408.10457 66 409 66.89543 409 68 L 409 84.5 C 409 85.60457 408.10457 86.5 407 86.5 L 339 86.5 C 337.89543 86.5 337 85.60457 337 84.5 L 337 68 C 337 66.89543 337.89543 66 339 66 Z" fill="#999"/><text transform="translate(342 69.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x=".98535156" y="11" textLength="60.029297">AuthServer</tspan></text><path d="M 483.6 66 L 542.1 66 C 543.20457 66 544.1 66.89543 544.1 68 L 544.1 84.5 C 544.1 85.60457 543.20457 86.5 542.1 86.5 L 483.6 86.5 C 482.49543 86.5 481.6 85.60457 481.6 84.5 L 481.6 68 C 481.6 66.89543 482.49543 66 483.6 66 Z" fill="#999"/><text transform="translate(486.6 69.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="3.5683594" y="11" textLength="45.36328">Instance</tspan></text><path d="M 26 643 L 107.5 643 C 108.60457 643 109.5 643.89543 109.5 645 L 109.5 661.5 C 109.5 662.60457 108.60457 663.5 107.5 663.5 L 26 663.5 C 24.89543 663.5 24 662.60457 24 661.5 L 24 645 C 24 643.89543 24.89543 643 26 643 Z" fill="#999"/><text transform="translate(29 646.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="19.735352" y="11" textLength="7.330078">T</tspan><tspan font-family="Helvetica" font-size="12" font-weight="500" x="25.735352" y="11" textLength="30.029297">enant</tspan></text><path d="M 187 643 L 260 643 C 261.10457 643 262 643.89543 262 645 L 262 661.5 C 262 662.60457 261.10457 663.5 260 663.5 L 187 663.5 C 185.89544 663.5 185 662.60457 185 661.5 L 185 645 C 185 643.89543 185.89544 643 187 643 Z" fill="#999"/><text transform="translate(190 646.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x=".15722275" y="11" textLength="66.685547">Orchestrator</tspan></text><path d="M 339 643 L 407 643 C 408.10457 643 409 643.89543 409 645 L 409 661.5 C 409 662.60457 408.10457 663.5 407 663.5 L 339 663.5 C 337.89543 663.5 337 662.60457 337 661.5 L 337 645 C 337 643.89543 337.89543 643 339 643 Z" fill="#999"/><text transform="translate(342 646.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x=".98535156" y="11" textLength="60.029297">AuthServer</tspan></text><path d="M 483.6 643 L 542.1 643 C 543.20457 643 544.1 643.89543 544.1 645 L 544.1 661.5 C 544.1 662.60457 543.20457 663.5 542.1 663.5 L 483.6 663.5 C 482.49543 663.5 481.6 662.60457 481.6 661.5 L 481.6 645 C 481.6 643.89543 482.49543 643 483.6 643 Z" fill="#999"/><text transform="translate(486.6 646.25)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="3.5683594" y="11" textLength="45.36328">Instance</tspan></text><line x1="66.75" y1="86.5" x2="66.75" y2="643" stroke="#999" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/><line x1="223.49999" y1="86.5" x2="223.49999" y2="643" stroke="#999" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/><line x1="373" y1="86.5" x2="373" y2="643" stroke="#999" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/><line x1="512.85" y1="86.5" x2="512.85" y2="643" stroke="#999" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/><line x1="66.75" y1="169.6" x2="365.45" y2="169.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><rect x="132.5" y="151.2" width="194.5" height="16" fill="white"/><text transform="translate(137.5 154.7)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="5.8359375" y="7" textLength="172.82812">t_token = GetAuthzToken(provider_id)</tspan></text><line x1="66.75" y1="197.59708" x2="215.94999" y2="197.59986" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(100.5 186.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="6.7929688" y="7" textLength="86.41406">LaunchApp(t_token)</tspan></text><line x1="223.49999" y1="227.2" x2="365.45" y2="227.2" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><rect x="228.25" y="206.5" width="135" height="16" fill="white"/><text transform="translate(233.25 205.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="4.890625" y="7" textLength="115.21875">AuthorizeTenantAppAccess</tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x=".08984375" y="16" textLength="124.82031">(t_token, p_token, app_id)</tspan></text><line x1="223.49999" y1="260.50136" x2="505.30005" y2="261.57134" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(396 248.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="21.195312" y="7" textLength="57.609375">Boot(app_id)</tspan></text><line x1="223.49999" y1="357.90154" x2="365.45" y2="357.90154" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><path d="M 512.85 272.67639 C 518.0328 274.05079 525.67527 272.22569 528.4 276.8 C 531.12473 281.37431 531.7914 295.73978 529.2 300.125 C 527.9964 302.16173 525.55942 302.7364 522.74838 302.86757" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(410.2 283.125)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="2.4429703" y="7" textLength="91.214844">Generate ECDSA key </tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="24.046486" y="16" textLength="43.20703">pair, CSR</tspan></text><text transform="translate(227 337.3)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="15.291016" y="7" textLength="115.21875">AddToTenantApp(p_token, </tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="3.2890625" y="16" textLength="134.421875">app_id, public_key, node_id)</tspan></text><path d="M 373 407.61623 C 378.9994 408.94402 388.0003 407.06983 391 411.6 C 393.9997 416.13017 393.9997 429.88423 391 434.8 C 389.43688 437.36158 386.2442 438.39359 382.6958 439.09156" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(273 418.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="4.392578" y="7" textLength="91.214844">CheckAppMembership,</tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="25.996094" y="16" textLength="48.007812">Mint Certs</tspan></text><line x1="512.85" y1="391.38288" x2="380.55" y2="391.38288" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(374.6 378.75)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x=".63906097" y="7" textLength="134.421875">GetCertificate(CSR, node_id)</tspan></text><line x1="373" y1="467.47675" x2="505.3" y2="467.47675" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(133.875 599.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="2.2226562" y="7" textLength="28.804688">OnExit</tspan></text><line x1="223.49999" y1="626.76668" x2="365.45" y2="626.76668" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(249.75 605.625)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="5.341797" y="7" textLength="100.816406">RevokeTenantAppAccess</tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="14.943359" y="16" textLength="81.61328">(app_id, p_token)</tspan></text><text transform="translate(390 446.975)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="2.5917969" y="7" textLength="105.61719">X509 certs, id tokens </tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="43.398438" y="16" textLength="19.203125">etc.</tspan></text><line x1="-1" y1="495.5" x2="576" y2="496.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(.6 173.5)" fill="#00c"><tspan font-family="Courier New" font-size="8" font-weight="bold" fill="#00c" x="14.347656" y="7" textLength="33.605469">Launch </tspan><tspan font-family="Courier New" font-size="8" font-weight="bold" fill="#00c" x="2.3457031" y="16" textLength="52.808594">Application</tspan></text><line x1="66.75" y1="132" x2="215.94999" y2="132" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(10 117.25)" fill="#00c"><tspan font-family="Courier New" font-size="8" font-weight="bold" fill="#00c" x="2.2460938" y="7" textLength="48.007812">Onboarding</tspan></text><text transform="translate(89.5 112.75)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="14.4921875" y="7" textLength="100.816406">Provision Tenant App </tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="4.890625" y="16" textLength="115.21875">(whitelist tenant's app)</tspan></text><line x1="69.5" y1="610" x2="215.95002" y2="609.54228" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(9.5 502.25)" fill="#00c"><tspan font-family="Courier New" font-size="8" font-weight="bold" fill="#00c" x="2.2460938" y="7" textLength="48.007812">Reschedule</tspan></text><line x1="-1.9999952" y1="142.75" x2="575" y2="143.75" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(523 413.5)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="bold" x="3.1972656" y="7" textLength="33.605469">Refresh</tspan><tspan font-family="Courier New" font-size="8" font-weight="bold" x="10.3984375" y="16" textLength="19.203125">loop</tspan></text><line x1="223.49999" y1="524.2935" x2="505.3" y2="524.2935" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(387.25 500.75)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="5.341797" y="7" textLength="105.61719">KillInstance(p_token, </tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="38.947266" y="16" textLength="33.605469">app_id)</tspan></text><rect x="339.9375" y="680" width="209.0625" height="44.125" fill="#ccc"/><text transform="translate(339.3125 685.25)" fill="black"><tspan font-family="Courier New" font-size="9" font-weight="500" x="11.2368164" y="7" textLength="162.02637">p_token -&gt; provider auth token</tspan></text><text transform="translate(340.9375 698.25)" fill="black"><tspan font-family="Courier New" font-size="9" font-weight="500" x="8.7626953" y="7" textLength="151.22461">t_token -&gt; tenant auth token</tspan></text><line x1="-2" y1="588.1875" x2="575" y2="589.1875" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(239.5 536.59375)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="16.892578" y="7" textLength="91.214844">RemoveFromTenantApp</tspan><tspan font-family="Courier New" font-size="8" font-weight="500" x="12.091797" y="16" textLength="100.816406">(p_token, public_key)</tspan></text><line x1="223.49999" y1="557.77483" x2="365.45" y2="557.77483" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(123.5 375.59375)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="bold" x="19.048828" y="7" textLength="19.203125">App </tspan><tspan font-family="Courier New" font-size="8" font-weight="bold" x="4.6464844" y="16" textLength="43.20703">lifecycle</tspan><tspan font-family="Courier New" font-size="8" font-weight="bold" x="16.6484375" y="25" textLength="19.203125">loop</tspan></text><line x1="512.85" y1="318.33272" x2="231.04995" y2="317.3446" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" stroke-dasharray="4,4"/><text transform="translate(248 306.90625)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="21.69336" y="7" textLength="81.61328">Return public_key</tspan></text><text transform="translate(336.3125 710.75)" fill="black"><tspan font-family="Courier New" font-size="9" font-weight="500" x="13.109619" y="7" textLength="189.03076">node_id -&gt; Instance's node identity</tspan></text><text transform="translate(5 592.6875)" fill="#00c"><tspan font-family="Courier New" font-size="8" font-weight="bold" fill="#00c" x="11.847656" y="7" textLength="28.804688">OnExit</tspan></text><line x1="66.75" y1="104.8" x2="365.45" y2="104.8" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/><text transform="translate(89.499997 92.25)" fill="black"><tspan font-family="Courier New" font-size="8" font-weight="500" x="39.73867" y="7" textLength="139.22266">Register Tenant App/Namespace</tspan></text></g></g></svg>
